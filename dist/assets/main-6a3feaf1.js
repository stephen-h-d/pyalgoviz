import{o as g,c as p,_ as B,a as I,i as b,e as D,b as f,d as N,O as S,f as T,r as F,g as E,h as q,j as K,F as V,k as A,l as C,t as R,m as X,V as Y,u as k,E as H,n as J,p as P,q as Q}from"./vizEvents-dbd1fc88.js";var U="y7gicm1",z="y7gicm0";function _(e,n){return g(function(t,r){var i=0;t.subscribe(p(r,function(o){r.next(e.call(n,o,i++))}))})}var G=Array.isArray;function W(e,n){return G(n)?e.apply(void 0,B([],I(n))):e(n)}function Z(e){return _(function(n){return W(e,n)})}function ee(e,n,t,r,i,o,u,s){var a=[],c=0,v=0,x=!1,M=function(){x&&!a.length&&!c&&n.complete()},$=function(d){return c<r?h(d):a.push(d)},h=function(d){o&&n.next(d),c++;var L=!1;b(t(d,v++)).subscribe(p(n,function(l){i?.(l),o?$(l):n.next(l)},function(){L=!0},void 0,function(){if(L)try{c--;for(var l=function(){var m=a.shift();u?D(n,u,function(){return h(m)}):h(m)};a.length&&c<r;)l();M()}catch(m){n.error(m)}}))};return e.subscribe(p(n,$,function(){x=!0,M()})),function(){s?.()}}function j(e,n,t){return t===void 0&&(t=1/0),f(n)?j(function(r,i){return _(function(o,u){return n(r,o,i,u)})(b(e(r,i)))},t):(typeof n=="number"&&(t=n),g(function(r,i){return ee(r,i,e,t)}))}var ne=["addListener","removeListener"],te=["addEventListener","removeEventListener"],re=["on","off"];function y(e,n,t,r){if(f(t)&&(r=t,t=void 0),r)return y(e,n,t).pipe(Z(r));var i=I(se(e)?te.map(function(s){return function(a){return e[s](n,a,t)}}):ie(e)?ne.map(w(e,n)):oe(e)?re.map(w(e,n)):[],2),o=i[0],u=i[1];if(!o&&N(e))return j(function(s){return y(s,n,t)})(b(e));if(!o)throw new TypeError("Invalid event target");return new S(function(s){var a=function(){for(var c=[],v=0;v<arguments.length;v++)c[v]=arguments[v];return s.next(1<c.length?c:c[0])};return o(a),function(){return u(a)}})}function w(e,n){return function(t){return function(r){return e[t](n,r)}}}function ie(e){return f(e.addListener)&&f(e.removeListener)}function oe(e){return f(e.on)&&f(e.off)}function se(e){return f(e.addEventListener)&&f(e.removeEventListener)}function ue(e,n){return n===void 0&&(n=T),e=e??ce,g(function(t,r){var i,o=!0;t.subscribe(p(r,function(u){var s=n(u);(o||!e(i,s))&&(o=!1,i=s,r.next(u))}))})}function ce(e,n){return e===n}const ae=R('<div id="blah">'),fe=R("<div>"),ve=async()=>await(await fetch("api/public_scripts")).json();function de(e){return y(document,"mousemove").pipe(Q(100)).pipe(_(i=>{const o=i.clientX,u=i.clientY,s=e.getBoundingClientRect();return o>=s.left&&o<=s.right&&u>=s.top&&u<=s.bottom}),ue())}function le(e,n){const t=n(),r=t.eventNavSubjects;de(e).subscribe(i=>{r.playPause$.next(i)}),J(()=>{const i=t.currentEvent();P(e,i,t.bBox)})}const me=e=>{const n=new H,t=X(e.events);n.speed$.next("Slow (20/s)");const i={currentEvent:new Y(n,{py_error:null,events:e.events}).getEventVal(),bBox:t,eventNavSubjects:n};return(()=>{const o=ae();return k(le,o,()=>i),A(()=>C(o,z)),o})()},pe=()=>{const[e]=q(ve),n=()=>{const t=[];if(e.loading||e.error)return e.error!==void 0&&console.error("Error loading script names",e.error),[];const r=e();for(const i of r.result)t.push(i);return t};return(()=>{const t=fe();return K(t,E(V,{get each(){return n()},children:r=>E(me,{get events(){return r.cached_events}})})),A(()=>C(t,U)),t})()},O=document.getElementById("root");if(O===null)throw Error("Fatal error: root div is null");F(()=>E(pe,{}),O);
